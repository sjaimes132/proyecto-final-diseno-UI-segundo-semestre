<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estadistica UNAB</title>
    <link rel="icon"  href="logo1.png" type = image/png>
    <link rel="stylesheet" href="grafica.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">
    <style>
        
        body {
            background: linear-gradient(to bottom, #000000, #3A153E, #A407B0, #FEA501); /*fondo gradiente*/
            text-align: center; /*fondo gradiente*/
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
  background-image: url('fondo.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  position: relative;
  z-index: 0;
}
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, rgba(254, 165, 1, 0.5), rgba(164, 7, 176, 0.5)); 
  z-index: -1;
}
    

        h1 {
    margin-top: 80px; /* espacio debajo de la barra de navegación */
    color: #f8f7f8;
    font-size: 32px;
}

        /* Contenedor que permite scroll horizontal si es necesario */
        .grafica-wrapper {
            overflow-x: auto;
            padding: 20px;
        }

        /* Canvas de la gráfica */
        #miGrafica {
            min-width: 900px;
            max-width: 1200px;
            height: 500px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            margin: 0 auto;
        }

        #logoesquina {
  position: fixed;      /* Para que se mantenga en la esquina al hacer scroll */
  top: 20%;            /* Distancia desde la parte superior */
  left: 0%;           /* Distancia desde el borde izquierdo */
  z-index: 10;          /* Asegura que esté por encima del fondo */
  width: 400%;           /* Ajusta el tamaño como porcentaje del ancho de la pantalla */
  max-width: 400%;     /* Limita el tamaño máximo para que no crezca demasiado */
  height: auto; 
}

    </style>
</head>
<body>
    <!-- Barra de navegación -->
    <div class="navbar">
        <div class="logo-container">
            <img src="logo.jpg" alt="Logo" class="logo">
        </div>
        <div class="nav-links" >
            <a href="perfil.html" target="_blank">Pefil</a>
            <a href="principal.html" target="_blank">Principal</a>
            <a href="horaslibres.html"target="_blank">Horas Libres</a>
            <a href="horario.html"target="_blank">Horario</a>
            <a href="grafica1.html"target="_blank">Estadística</a>
            <a href="Historia.html"target="_blank">Historia</a>
            <a href="reserva.html"target="_blank">Reserva</a>
            <a href="Campus.html"target="_blank">Campus</a>
            <a href="convenios.html"target="_blank">Convenios</a>
            <a href="https://latienda.unab.edu.co/"target="_blank">Tienda</a>
            <a href="logros.html"target="_blank">logros</a>
            <a href="nosotros.html"target="_blank">Nosotros</a>

        </div>
    </div>

<div class="logo-container" id="logoesquina">
        <img src="logo1.png" alt="Logo" class="logo">
    </div>

    <div>
    <h1>Estadística UNAB</h1>
    </div>

    <!-- Contenedor de la gráfica -->
<div class="grafica-wrapper">
    <canvas id="miGrafica"></canvas>
</div>

<!-- Selección de carrera -->
<div class="seleccion-carrera">
    <label for="carrera" style="color: white; font-weight: bold;">Selecciona tu carrera:</label>
    <select id="carrera">
        <option disabled selected>Elige una opción</option>
        <option value="Maestría en Administración de Empresa">Maestría en Administración de Empresa</option>
        <option value="MBA">MBA</option>
        <option value="Maestría en Finanzas">Maestría en Finanzas</option>
        <option value="Maestría en Gerencia Educativa">Maestría en Gerencia Educativa</option>
        <option value="Maestría en Negocios Digitales">Maestría en Negocios Digitales</option>
        <option value="Maestría en Neurociencia para las Organizaciones">Maestría en Neurociencia para las Organizaciones</option>
    </select>
    <button onclick="enviarCarrera()">Actualizar Datos</button>
    <p id="respuesta" style="color: white; margin-top: 10px;"></p>
</div>

<!-- Script de la gráfica + lógica para actualizar -->
<script>
    const ctx = document.getElementById('miGrafica').getContext('2d');
    const miGrafico = new Chart(ctx, { //clarificamos datos de la tabla
        type: 'bar',
        data: {
            labels: ['Maestría en Administración de Empresa', 'MBA', 'Maestría en Finanzas','Maestría en Gerencia Educativa','Maestría en Negocios Digitales','Maestría en Neurociencia para las Organizaciones'], // nombres carreras visibles supuestamente 
            datasets: [{
                label: 'Cantidad de estudiantes',
                data: [12, 19, 3, 5, 8, 13],
                backgroundColor: [
                    '#3A153E',
                    '#A407B0',
                    '#3A153E',
                    '#A407B0',
                    '#3A153E',
                    '#A407B0'
                ],
                borderRadius: 6,
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    display: true,
                    ticks: {
                        color: '#fff',
                        font: {
                            size: 14,
                            weight: 'bold'
                        }
                    },
                    grid: {
                        display: false
                    }
                },
                y: {
                    beginAtZero: true,
                    display: false
                }
            },
            plugins: {
                tooltip: {
                    enabled: true,
                    callbacks: {
                        title: function (tooltipItems) {
                            const fullLabels = [
                                'Maestría en Administración de Empresa',
                                'MBA',
                                'Maestría en Finanzas',
                                'Maestría en Gerencia Educativa',
                                'Maestría en Negocios Digitales',
                                'Maestría en Neurociencia para las Organizaciones'
                            ];
                            return fullLabels[tooltipItems[0].dataIndex];
                        },
                        label: function (tooltipItem) {
                            return tooltipItem.raw + ' estudiantes';
                        }
                    }
                },
                legend: {
                    display: false
                }
            }
        }
    });

    // Función para actualizar el gráfico
    function enviarCarrera() {
        const seleccion = document.getElementById('carrera').value;
        const respuesta = document.getElementById('respuesta');

        const mapaCarreras = {
            'Maestría en Administración de Empresa': 0,
            'MBA': 1,
            'Maestría en Finanzas': 2,
            'Maestría en Gerencia Educativa': 3,
            'Maestría en Negocios Digitales': 4,
            'Maestría en Neurociencia para las Organizaciones': 5
        };

        if (seleccion && seleccion in mapaCarreras) {
            const index = mapaCarreras[seleccion];
            miGrafico.data.datasets[0].data[index] += 1;
            miGrafico.update();
            respuesta.textContent = `Has añadido 1 estudiante a: ${seleccion}`;
            alert(`se a actualizado los datos: nuevo estudiante de: ${seleccion}`);
        } else {
            respuesta.textContent = 'Por favor selecciona una carrera válida.';
        }
    }
</script>


</body>
</html>